!function(t){function e(e){for(var r,a,c=e[0],s=e[1],l=e[2],f=0,d=[];f<c.length;f++)a=c[f],o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);for(u&&u(e);d.length;)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},o={0:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=s;i.push([70,1]),n()}({174:function(t,e,n){var r=n(175);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(177)(r,o);r.locals&&(t.exports=r.locals)},175:function(t,e,n){(t.exports=n(176)(!1)).push([t.i,"*{font-family:'微軟正黑體', 'arial';margin:0;padding:0;box-sizing:border-box;word-break:normal}button{cursor:pointer;outline:none;box-shadow:none;background-color:#0026c0;color:#fff;padding:6px;border:none;border-radius:3px;margin:0px 5px 0px 5px;font-weight:500;transition:.2s}button:hover{opacity:.7;transition:.2s}button a{text-decoration:none;color:#fff}input[type=\"text\"]:focus,textarea:focus,button:focus{box-shadow:0px 0px 10px #0022e0}input[type=\"text\"][type='radio']:focus,textarea[type='radio']:focus,button[type='radio']:focus{border-radius:20000px}input[type=\"radio\"]{position:relative}input[type=\"radio\"]:focus:before{content:'';position:absolute;top:2px;left:0;width:10px;height:10px;box-shadow:0px 0px 10px #0022e0;border-radius:2000px}textarea{width:100%;padding:10px;font-size:18px;resize:none;border:2px solid #00a0eb;border-radius:10px}input[type=\"text\"]{margin:6px;padding:6px;border-radius:3px;border:2px solid #00a0eb}hr{margin:10px 0px}.clearfix:after{content:'';display:block;width:0;height:100%;clear:both}.secondBTN{background-color:#00a0eb;color:#fff}.half{width:calc(50% - 20px);float:left}.half textarea{width:100%}.test-paper{position:relative;width:100%;max-width:767px;box-shadow:0px 0px 20px #999;text-align:center;border-radius:10px;margin:20px auto;float:none}#score{text-align:right}.paper{margin:10px;padding:10px}.star-note-buttons{text-align:right}.star-note-buttons .starBTN,.star-note-buttons .noteBTN{cursor:pointer;color:#ccc;padding:0px 10px}.star-note-buttons .starBTN.active,.star-note-buttons .starBTN:hover,.star-note-buttons .noteBTN.active,.star-note-buttons .noteBTN:hover{color:#0026c0}.question-container{position:relative;display:flex;text-align:left}.question-container .answer-part{display:flex;width:15%;padding:0px 5px 0px 5px;align-items:center;justify-content:center}.question-container .answer-part .answer-active{font-size:36px;font-weight:800;color:#0026c0}.question-container .answer-part .answer-default{font-size:12px;color:#ddd}.question-container .question-part{width:90%;margin:10px 0px 10px 0px}.question-container .question-part .question{width:100%;padding-bottom:10px}.question-container .question-part .options{padding:10px;cursor:pointer}.component-withHint{position:relative;display:inline-block;cursor:pointer}.component-withHint:hover .hint-dialog{left:-50%;opacity:1;transition:opacity .3s}.hint-dialog{display:block;position:absolute;z-index:20;white-space:nowrap;margin-top:10px;text-align:center;border-radius:3px;left:-10000px;opacity:0;padding:6px;background-color:#4d4d4d;color:#fff;transition:opacity .1s;word-break:unset}#myNote{position:fixed;top:0;right:0;width:300px;height:100vh;background-color:#fff;box-shadow:6px 0px 20px #aaa}#myNote h2{display:flex;justify-content:space-between;background-color:#0026c0;color:#fff;padding:10px}#myNote h2 .back-icon{cursor:pointer}#myNote textarea{height:calc(100vh - 100px);width:calc(100% - 40px);margin:20px;font-size:18px}.tab-menu{display:flex;justify-content:space-between;padding:10px}.noteBTN-container{position:absolute;top:-40px;right:60px;display:block;padding:10px;background-color:#aaa;border-radius:6px;box-shadow:0px 0px 20px #000}.note-noteBTN{height:100px;font-size:18px}.question-note{position:absolute;left:0;right:0;margin:auto;z-index:20;background-color:#333;padding:10px}.question-note:before{position:absolute;top:-10px;left:0;right:0;margin:auto;content:'';width:0px;height:0px;border-style:solid;border-width:0 10px 10px 10px;border-color:transparent transparent #333 transparent}.question-note textarea{height:110px;font-size:18px}.checked-text{position:absolute;top:-30px;font-size:32px;font-weight:600}.checked-text.correct-text{color:#00e11a}.checked-text.false-text{color:red}#createQaArea{position:relative;width:100%;max-width:700px;margin:20px auto;padding:10px;text-align:center;background-color:#eee;border-radius:10px}.createQA-container{float:left;width:calc(100% - 20px);margin:10px;padding:10px;border-radius:10px}.createQA-container.question{background-color:#fff;width:calc(70% - 20px)}.createQA-container.question .single-option-container{display:inline-block;margin:0px 10px}.createQA-container.answer{background-color:#fff;width:calc(30% - 20px)}.createQA-container.answer textarea{text-align:center;overflow-x:hidden;height:300px}.seleced-tag{display:inline-block;padding:3px;border:2px solid #aaa;border-radius:3px}.database-input{width:calc(100% - 12px)}.single-createQA-title{color:#0026c0}.coin-img{width:30px}.single-QA{position:relative}.delete-createQA{position:absolute;top:0px;right:0px;color:#0026c0;cursor:pointer}.delete-createQA:hover{opacity:.8}#game-canvas{position:fixed;top:40px;right:0;background-color:#eee}#coin-container span{font-size:24px}\n",""])},179:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"countUIText",function(){return Tn}),n.d(r,"actionUpGroupObjs",function(){return _n}),n.d(r,"myLayer",function(){return Nn}),n.d(r,"testButton",function(){return Pn}),n.d(r,"userCharacter",function(){return Bn}),n.d(r,"moneyBag",function(){return Qn}),n.d(r,"moneys",function(){return Dn}),n.d(r,"countNum",function(){return Ln}),n.d(r,"upCoin",function(){return Fn}),n.d(r,"Coin",function(){return Mn}),n.d(r,"backTest",function(){return Rn}),n.d(r,"alert",function(){return Jn}),n.d(r,"OKIcon",function(){return Gn}),n.d(r,"cancelIcon",function(){return Un}),n.d(r,"alertBack",function(){return Hn}),n.d(r,"testPicBack",function(){return qn}),n.d(r,"ShoppingList",function(){return zn}),n.d(r,"alertPurchase",function(){return Yn}),n.d(r,"moneyUIwithText",function(){return Wn}),n.d(r,"alertUI",function(){return Xn}),n.d(r,"testMAP",function(){return Kn}),n.d(r,"testGroupMap",function(){return Vn}),n.d(r,"UILayer",function(){return $n}),n.d(r,"ObjLayer",function(){return Zn}),n.d(r,"BackLayer",function(){return tr}),n.d(r,"idleGame",function(){return nr});var o=n(0),i=n.n(o),a=n(24),c=n.n(a),s=n(16),l=n(9),u=n(17);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t){return(d="function"==typeof Symbol&&"symbol"===f(Symbol.iterator)?function(t){return f(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":f(t)})(t)}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=[],o=0,i=n>=e?e:n,a=Math.abs(n-e)+1,c=t>a?a:t;o<c;)for(var s=i+~~(Math.random()*a);-1===r.indexOf(s);)r=[].concat(p(r),[s]),o+=1;return r},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=1*e,i=t.length,a=t.filter(function(t){return t.id===o})[0],c=t.map(function(t){return t.id}).indexOf(o),s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){h(t,e,n[e])})}return t}({},a,h({},n,r));return 0===c?[s].concat(p(t.slice(1,i))):c===i?[].concat(p(t.slice(0,i-1)),[s]):[].concat(p(t.slice(0,c)),[s],p(t.slice(c+1,i)))},g=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=n.filter(function(t){return t.star}),i=function(t){return t>1?t:1},a=[],c=m(e,0,t?i(o.length)-1:i(n.length)-1);if(r){var s=!0,l=!1,u=void 0;try{for(var f,d=c[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var h=f.value;a=[].concat(p(a),t?[o[h]]:[n[h]])}}catch(t){l=!0,u=t}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}else a=t?o.slice(0,e):n.slice(0,e);return void 0===a[0]?[]:a},b=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")?{backgroundColor:"#111",color:"#fff"}:{backgroundColor:"#ddd",color:"#111"}},v=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{}],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],i=0;i<t.length;i++)(r?-1===e.indexOf(t[i][n]):-1!==e.indexOf(t[i][n]))&&(o=[].concat(p(o),[t[i]]));return o},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A";return[{ABCD:"A",num:0},{ABCD:"B",num:1},{ABCD:"C",num:2},{ABCD:"D",num:3},{ABCD:"E",num:4}].filter(function(e){return e.ABCD.toUpperCase()===t||e.ABCD.toLowerCase()===t})[0].num},S=function t(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{id:0}],n=[],r=0;r<e.length;r++)for(var o in e[r]){if(""===e[r][o])return!1;if(Array.isArray(e[r][o]))if("object"===d(e[r][o][0]))n=[].concat(p(n),[t(e[r][o])]);else if(e[r][o].indexOf(!0))return!1}return-1===n.indexOf(!1)},x=function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&(e=[].concat(p(e),[t[n]]));return e},O=function(t){var e=t.slice(t.length-1);if(-1!==e.search(/[1|2|3|4]$/gi,""))return t.slice(0,t.length-1)+["A","B","C","D"][["1","2","3","4"].indexOf(e)]},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=t%60,n=function(t){return t<10?"0"+t:t.toString()};return[n(~~(t/60)),n(e)]};function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t){return(k="function"==typeof Symbol&&"symbol"===C(Symbol.iterator)?function(t){return C(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":C(t)})(t)}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}function _(t,e){return!e||"object"!==k(e)&&"function"!=typeof e?N(t):e}function N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var L=["A","B","C","D","E","F"],F=function(t){var e={id:t,star:!1,noteContext:""};localStorage.getItem("starAndNote")||localStorage.setItem("starAndNote",JSON.stringify([]));var n=JSON.parse(localStorage.getItem("starAndNote")),r=n.filter(function(e){return e.id===t})[0];return r||(localStorage.setItem("starAndNote",JSON.stringify([].concat(D(n),[e]))),e)},M=function(t,e,n){var r=JSON.parse(localStorage.getItem("starAndNote"));localStorage.setItem("starAndNote",JSON.stringify(y(r,t,e,n)))},R=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"I am hint!",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(o){function a(t){return E(this,a),_(this,P(a).call(this,t))}return B(a,i.a.Component),T(a,[{key:"render",value:function(){var o=this.props.isActive,a=void 0!==o&&o;return i.a.createElement("div",{className:"component-withHint ".concat(n)},i.a.createElement(t,this.props),i.a.createElement("div",{className:"hint-dialog"},a?r:e))}}]),a}()},J=function(t){function e(t){var n;return E(this,e),j(N(n=_(this,P(e).call(this,t))),"_handleOpenNote",function(){n.setState({isNoteOpen:!n.state.isNoteOpen})}),n.state={isNoteOpen:!1},n}return B(e,i.a.Component),T(e,[{key:"render",value:function(){var t=this.props,e=t.id,n=t.changeAnswer,r=t.myAnswer,a=t.question,c=t.options,s=t.isHandIn,l=t.isCheckCorrectAns;return i.a.createElement(o.Fragment,null,i.a.createElement(Y,{id:e,isHandIn:s,openNote:this._handleOpenNote}),i.a.createElement(G,{changeAnswer:n,myAnswer:r,id:e,question:a,options:c,isHandIn:s,isNoteOpen:this.state.isNoteOpen,isCheckCorrectAns:l,openNote:this._handleOpenNote}))}}]),e}(),G=function(t){function e(t){var n;return E(this,e),j(N(n=_(this,P(e).call(this,t))),"componentWillMount",function(){var t=n.props.id;n.setState({noteContext:F(t).noteContext})}),j(N(n),"componentDidMount",function(){n.questionNote.focus()}),j(N(n),"_handleEditNote",function(t){var e=t.target.value,r=n.props.id;F(r);n.setState({noteContext:e}),M(r,"noteContext",e)}),j(N(n),"_handleOptionTitle",function(t){var e=t.target.getAttribute("answer");n.setState({yourAnswer:e}),n.props.changeAnswer(t)}),n.state={yourAnswer:"",noteContext:""},n}return B(e,i.a.Component),T(e,[{key:"render",value:function(){var t,e=this,n=this.props,r=n.myAnswer,a=void 0===r?[]:r,c=n.id,s=void 0===c?1:c,l=n.question,u=void 0===l?"":l,f=n.options,d=void 0===f?[]:f,h=n.isHandIn,p=void 0!==h&&h,m=n.isNoteOpen,y=void 0!==m&&m,g=n.isCheckCorrectAns,b=void 0!==g&&g,v=n.openNote,w=void 0===v?function(){}:v,S=this.state.noteContext,x=a.filter(function(t){return t.id===s})[0],O=function(t){for(var e=[],n=["A","B","C","D","E"],r=0;r<t.length;r++)e[r]={id:n[r],options:t[r]};return e}(d);return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"question-container"},i.a.createElement("div",{className:"answer-part"},i.a.createElement("span",{className:x.answer?"answer-active":"answer-default"},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t);return L[e]}(x.answer,d)||"your answer"),i.a.createElement("span",{className:"corrected-answer"},b?(t=d.indexOf(x.correctAnswer),L[t]):"")),i.a.createElement("div",{className:"question-part"},i.a.createElement("form",{onChange:this._handleOptionTitle,id:s,onSubmit:function(t){return t.preventDefault()}},"notYet"!==x.checked?x.checked?i.a.createElement("span",{className:"checked-text correct-text"},"✔"):i.a.createElement("span",{className:"checked-text false-text"},"✘"):"",i.a.createElement("p",{className:"question"},u),O.map(function(t){return i.a.createElement("label",{className:"options",key:t.id},i.a.createElement("input",{type:"radio",name:s,value:t.options,answer:t.id,disabled:p}),i.a.createElement("span",{style:{color:"blue"}},t.id)," "+t.options)})))),i.a.createElement("hr",null),i.a.createElement("div",{className:"question-note",style:{display:y?"block":"none"}},i.a.createElement("textarea",{onChange:this._handleEditNote,value:S,placeholder:"Take your note here.",ref:function(t){return e.questionNote=t}}),i.a.createElement("button",{onClick:w},"confirm")))}}]),e}(),U=function(t){function e(t){var n;return E(this,e),(n=_(this,P(e).call(this,t))).state={},n}return B(e,i.a.Component),T(e,[{key:"render",value:function(){var t=this.props,e=t.id,n=void 0===e?0:e,r=t.star,o=void 0!==r&&r,a=t.starFn,c=void 0===a?function(){}:a;return i.a.createElement("span",{onClick:c,name:n,className:o?"starBTN active":"starBTN"},i.a.createElement(l.a,{icon:"star"}))}}]),e}(),H=function(t){function e(t){var n;return E(this,e),(n=_(this,P(e).call(this,t))).state={isEditNote:!1,note:""},n}return B(e,i.a.Component),T(e,[{key:"render",value:function(){var t=this.props,e=t.id,n=void 0===e?0:e,r=t.noteContext,a=void 0===r?"":r,c=t.noteFn,s=void 0===c?function(){}:c,u=t.isHandIn,f=t.openNote,d=this.state.isEditNote;return i.a.createElement(o.Fragment,null,i.a.createElement("span",{className:"noteBTN"},i.a.createElement(l.a,{onClick:u?f:function(){window.alert("交卷後才能記筆記~")},name:n,icon:"edit"})),i.a.createElement("div",{className:"noteBTN-container",style:{display:d?"block":"none",width:400}},i.a.createElement("textarea",{name:n,className:"note-noteBTN",onChange:s,value:a}),i.a.createElement("button",{onClick:f},"confirm")))}}]),e}(),q=R(U,"收藏題目","已收藏"),z=R(H,"紀錄筆記"),Y=function(t){function e(t){var n;return E(this,e),j(N(n=_(this,P(e).call(this,t))),"setDataFromLS",function(){var t=n.props.id,e=F(t);n.setState({id:e.id,star:e.star,noteContext:e.noteContext})}),j(N(n),"componentWillMount",function(){n.setDataFromLS()}),j(N(n),"componentDidUpdate",function(t,e){t.id!==n.state.id&&n.setDataFromLS()}),j(N(n),"_handleStar",function(){var t=n.state,e=t.id,r=t.star;n.setState({star:!n.state.star}),M(e,"star",!r)}),n.state={id:0,star:!1,noteContext:""},n}return B(e,i.a.PureComponent),T(e,[{key:"render",value:function(){var t=this.state,e=t.id,n=t.star,r=t.noteContext,o=this.props,a=o.isHandIn,c=o.openNote;return i.a.createElement("div",{className:"star-note-buttons"},i.a.createElement(q,{id:e,star:n,isActive:n,starFn:this._handleStar}),i.a.createElement(z,{id:e,noteContext:r,noteFn:this._handleEditNote,isHandIn:a,openNote:c}))}}]),e}();function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t){return(X="function"==typeof Symbol&&"symbol"===W(Symbol.iterator)?function(t){return W(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":W(t)})(t)}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e,n){return e&&V(t.prototype,e),n&&V(t,n),t}function Z(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nt(t,e)}function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rt=function(t){var e=t.obj,n=void 0===e?[]:e,r=t.clickFn,o=void 0===r?function(){}:r,a=t.downloadName,c=void 0===a?"Nihongo":a,s="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n));return i.a.createElement("a",{href:s,onClick:o,download:c+".json"},"Download JSON file")},ot=function(t){var e=t.myAnswer,n=void 0===e?[]:e,r=t.allQA,o=void 0===r?[]:r;return i.a.createElement("div",null,i.a.createElement("h3",null,"Your Score:"),~~(n.filter(function(t){return!0===t.checked}).length/o.length*100))},it=function(t){return t.filter(function(t){return""!==t.answer}).length},at=function(t){function e(t){var n;return K(this,e),(n=Z(this,tt(e).call(this,t))).state={},n}return et(e,i.a.PureComponent),$(e,[{key:"render",value:function(){var t=this.props,e=t.testQA,n=void 0===e?[]:e,r=t.myAnswer,o=t.isHandIn,a=t.changeAnswer,c=t.checkAnswer,s=t.isCheckCorrectAns,l=t.checkCorrectAnswer;return i.a.createElement("div",{id:"test-paper",className:"test-paper"},i.a.createElement("h4",null,"完成題數:",i.a.createElement("span",null,it(r)," /",n.length),i.a.createElement("span",null,n.length>0&&n.length===it(r)?"所有題目都完成了！":"還有".concat(n.length-it(r),"題未完成"))),i.a.createElement("h4",{id:"score"},"SCORE:",i.a.createElement("span",null,o?i.a.createElement(ot,{correctAns:r,allQA:n}):"")),i.a.createElement("hr",null),n.length>0?n.map(function(t){return i.a.createElement(i.a.Fragment,{key:t.id},i.a.createElement(J,{key:t.id,id:t.id,question:t.question,options:t.options,myAnswer:r,changeAnswer:a,isHandIn:o,isCheckCorrectAns:s}))}):"尚無題目",i.a.createElement("button",{onClick:c},"Check Answer!"),i.a.createElement("button",{className:"secondBTN",style:{display:o?"inline-block":"none"},onClick:l},"Check Correct Answer!"))}}]),e}(),ct=function(t){function e(t){return K(this,e),Z(this,tt(e).call(this,t))}return et(e,i.a.Component),$(e,[{key:"render",value:function(){var t=this.props,e=t.testQA,n=void 0===e?[]:e,r=t.myAnswer,o=t.isHandIn,a=t.changeAnswer,c=t.checkAnswer,s=t.isCheckCorrectAns,l=t.singleAnswerModeState,u=n[l.index];return i.a.createElement("div",{id:"single-test-paper",className:"test-paper test-paper"},n.length>0?i.a.createElement("div",null,i.a.createElement("h4",null,"目前題數 / 總題數: ",i.a.createElement("br",null),i.a.createElement("span",null,l.index+1," /",l.idArr.length)),i.a.createElement(J,{key:u.id,id:u.id,question:u.question,options:u.options,myAnswer:r,changeAnswer:a,isHandIn:o,isCheckCorrectAns:s}),i.a.createElement("div",null),o?i.a.createElement(ot,{myAnswer:r,allQA:l.idArr}):"",i.a.createElement("button",{onClick:c},"Check Answer!")):"尚無題目")}}]),e}();function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t){return(lt="function"==typeof Symbol&&"symbol"===st(Symbol.iterator)?function(t){return st(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":st(t)})(t)}function ut(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e,n){return e&&dt(t.prototype,e),n&&dt(t,n),t}function pt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?yt(t):e}function mt(t){return(mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bt(t,e)}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt=function(t){function e(t){var n;return ft(this,e),vt(yt(n=pt(this,mt(e).call(this,t))),"setToDefault",function(){n.setState({optionDefault:"Choose"})}),n.state={optionDefault:"Choose"},n}return gt(e,i.a.Component),ht(e,[{key:"render",value:function(){var t=this.props.allTestFilterConditions;return i.a.createElement("select",{value:this.state.optionDefault,onInput:this.props.changeSelect,onChange:this.setToDefault},i.a.createElement("option",{style:{display:"none"},value:"Choose"},"Choose"),t.map(function(t){return i.a.createElement("option",{key:t,value:t},t)}))}}]),e}(),St=function(t){function e(t){var n;return ft(this,e),vt(yt(n=pt(this,mt(e).call(this,t))),"_handleChangeSelect",function(t){var e=n.state.selectedArr,r=t.target.value;-1===e.indexOf(r)&&n.setState(function(t){return{selectedArr:[].concat(ut(t.selectedArr),[r])}})}),vt(yt(n),"_handleDeleteSelect",function(t){var e=t.target.getAttribute("name");console.log(e);var r=n.state.selectedArr.filter(function(t){return t!==e});n.setState({selectedArr:r})}),n.state={selectedArr:[]},n}return gt(e,i.a.Component),ht(e,[{key:"render",value:function(){var t=this.props,e=t.allTestFilterConditions,n=t.nowFIlterCondition,r=t.changeSelectDatabase,o=t.deleteSelectDatabase;return i.a.createElement("div",null,i.a.createElement(wt,{allTestFilterConditions:e,changeSelect:r}),n.map(function(t){return i.a.createElement("div",{className:"seleced-tag",key:t},t,i.a.createElement("span",{name:t,onClick:o}," (X) "))}))}}]),e}(),xt=n(18);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t){return(At="function"==typeof Symbol&&"symbol"===Ot(Symbol.iterator)?function(t){return Ot(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Ot(t)})(t)}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){jt(t,e,n[e])})}return t}function kt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function jt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e,n){return e&&It(t.prototype,e),n&&It(t,n),t}function _t(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?Nt(t):e}function Nt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qt(t,e)}function Qt(t,e){return(Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}s.b.add(u.c);var Dt=function(t){var e=t.id,n=void 0===e?"option-0-0":e,r=t.changeFn,o=t.choice,a=void 0===o?"A":o,c=t.value,s=void 0===c?"":c,l=t.placeholder,u=void 0===l?"option here":l;return i.a.createElement("div",{className:"single-option-container"},i.a.createElement("span",null,a),i.a.createElement("input",{id:n,onChange:r,value:s,placeholder:u,type:"text"}))},Lt=R(function(t){var e=t.id,n=void 0===e?0:e,r=t.deleteQuestion,o=void 0===r?function(){}:r;return i.a.createElement("span",{name:n,onClick:o.bind(void 0,n),className:"delete-createQA"},i.a.createElement(l.a,{name:n,icon:"minus-circle"}))},"Delete This Question","delete-createQA"),Ft=function(t){function e(t){var n;return Et(this,e),(n=_t(this,Pt(e).call(this,t))).state={},n}return Bt(e,i.a.Component),Tt(e,[{key:"render",value:function(){var t=this.props,e=t.id,n=t.question,r=t.options,o=t.changeFn,a=t.deleteQuestion;return i.a.createElement("form",{onChange:o,className:"single-QA",id:e},i.a.createElement("h3",{className:"single-createQA-title"},"Question ",e+1," "),i.a.createElement(Lt,{id:e,deleteQuestion:a}),i.a.createElement("textarea",{value:n,id:"question-"+e,onChange:o}),i.a.createElement("h3",null,"Options"),r.map(function(t){return i.a.createElement(Dt,{key:"a-".concat(e,"-").concat(t.id),id:"option-".concat(e,"-").concat(t.id),choice:t.choice,value:t.option,changeFn:o})}),i.a.createElement("hr",null))}}]),e}(),Mt=function(t){function e(t){var n;return Et(this,e),jt(Nt(n=_t(this,Pt(e).call(this,t))),"componentDidUpdate",function(t){if(t.oldData!==n.props.oldData){var e=n.props.oldData,r=void 0===e?[{id:-1}]:e;n.setState({lastIdOfOldData:r[r.length-1].id+1})}}),jt(Nt(n),"componentDidMount",function(){var t=localStorage.getItem("tempSave");t?n.setState({createQAData:JSON.parse(t)}):localStorage.setItem("tempSave","")}),jt(Nt(n),"_handleChange",function(t){var e,r=t.target,o=r.id,i=r.value,a=n.state.createQAData;if(-1!==o.search(/question-/gi)){var c=1*o.slice(9);e=y(a,c,"question",i)}else if(-1!==o.search(/option-/gi)){var s=1*o.split("-")[1],l=1*o.split("-")[2],u=y(a[s].options,l,"option",i);e=y(a,s,"options",u)}localStorage.setItem("tempSave",JSON.stringify(e)),n.setState({createQAData:e})}),jt(Nt(n),"_handleChangeDatabaseName",function(t){var e=t.target.value;n.setState({database:e})}),jt(Nt(n),"_handleAddQuestion",function(){var t=n.state.createQAData,e=[].concat(kt(t),[n.qaPlate(t[t.length-1].id+1)]);n.setState({createQAData:e}),n.bottom.scrollIntoView({behavior:"smooth"})}),jt(Nt(n),"_handleDeleteQuestion",function(t){var e=n.state.createQAData,r=e.filter(function(e){return e.id>1*t}),o=r.map(function(t){return Ct({},t,{id:t.id-1})}),i=e.filter(function(e){return e.id<1*t});e.length>1&&(i?r?n.setState({createQAData:[].concat(kt(i),kt(o))}):n.setState({createQAData:kt(i)}):n.setState({createQAData:kt(o)}))}),jt(Nt(n),"_handleChangeAnswer",function(t){var e=t.target.value,r=n.state.answer,o=O(e)?O(e).toUpperCase():e.toUpperCase(),i=o.length,a=i-6,c=r;i>r.length&&-1!==o.search(/[a|b|c|d]$/gi,"")?c=a%6==0?o.slice(0,i-1)+"\n"+o.slice(i-1):o:i<r.length&&(c=o),n.setState({answer:c})}),jt(Nt(n),"_resetCreateQA",function(){window.confirm("Are you sure deleting these QA?")&&localStorage.setItem("tempSave","")}),jt(Nt(n),"_checkAmoutOfQA",function(t){var e=n.state,r=e.answer,o=e.createQAData,i=n.props.oldData,a=void 0===i?[]:i,c=r.replace(/\n/gi,"").length;c!==o.length?(console.log(c,o.length),t.preventDefault(),window.alert("題數與解答的數量不符~")):!1===S(o.map(function(t){return Ct({},t,{correctAnswer:"mockAnswer"})}))?(t.preventDefault(),console.log(o),window.alert("題目或是選項還有未填寫的喔～")):(n.props.setCoin(100*o.length),n.setState({resultJSON:[].concat(kt(a),kt(n.convertDataToJSON(o)))}))}),jt(Nt(n),"convertDataToJSON",function(t){var e=n.state,r=e.lastIdOfOldData,o=e.answer,i=e.database,a=t.map(function(t){return Ct({},t,{id:t.id+r})}).map(function(t){return Ct({},t,{options:t.options.map(function(t){return t.option})})}),c=[],s=o.replace(/[\n]/gi,"").split("").map(function(t){return w(t)});console.log(s);for(var l=0;l<s.length;l++)c[l]=Ct({},a[l],{databaseSort:i||"未分類",correctAnswer:a[l].options[s[l]]});return console.log(c),c}),n.qaPlate=function(){return{id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,question:"",correctAnswer:"",options:[{id:0,choice:"A",option:""},{id:1,choice:"B",option:""},{id:2,choice:"C",option:""},{id:3,choice:"D",option:""}]}},n.state={createQAData:[n.qaPlate()],database:"",lastIdOfOldData:0,answer:"",resultJSON:[{}]},n}return Bt(e,i.a.Component),Tt(e,[{key:"render",value:function(){var t=this,e=this.state,n=e.createQAData,r=e.answer,o=r.replace(/[\n]/gi,"").length;return i.a.createElement("div",null,i.a.createElement("div",{id:"createQaArea",className:"clearfix"},i.a.createElement(xt.a,{id:"createQA.bigTitle",tagName:"h2",values:{someone:"Hellen"}}),i.a.createElement("hr",null),i.a.createElement("div",{className:"createQA-container question"},i.a.createElement("h4",null,"Your Database Name:"),i.a.createElement("input",{type:"text",className:"database-input",onChange:this._handleChangeDatabaseName,value:this.database,placeholder:this.props.intl.formatMessage({id:"createQA.databaseName"})}),i.a.createElement("hr",null),n.map(function(e){return i.a.createElement(Ft,{key:"form"+e.id,id:e.id,question:e.question,options:e.options,changeFn:t._handleChange,deleteQuestion:t._handleDeleteQuestion})}),i.a.createElement("button",{onClick:this._handleAddQuestion},i.a.createElement(l.a,{icon:"plus-circle"}))),i.a.createElement("div",{className:"createQA-container answer",ref:function(e){return t.answerContainer=e}},i.a.createElement("h3",null,"Correct Answer"),i.a.createElement("span",null,o,"個答案"),i.a.createElement("span",null,"("+(o>n.length?"more than ans":o<n.length?"less than ans":"No problem~")),i.a.createElement("textarea",{onChange:this._handleChangeAnswer,value:r})),i.a.createElement("div",{className:"createQA-container"},i.a.createElement("hr",null),i.a.createElement("button",null,i.a.createElement(rt,{obj:this.state.resultJSON,clickFn:this._checkAmoutOfQA})),i.a.createElement("button",{onClick:this._resetCreateQA},"Reset QAs"))),i.a.createElement("div",{ref:function(e){return t.bottom=e},style:{width:"100px",height:"20px"}}))}}]),e}(),Rt=Object(xt.d)(Mt),Jt=n(64),Gt=n.n(Jt),Ut=n(67),Ht=n.n(Ut),qt=n(66),zt=n.n(qt),Yt=n(183);function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"===Wt(Symbol.iterator)?function(t){return Wt(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Wt(t)})(t)}function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ee=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=Vt(e).call(this,t),n=!o||"object"!==Xt(o)&&"function"!=typeof o?$t(r):o,te($t(n),"componentWillMount",function(){n.resetTime()}),te($t(n),"componentDidUpdate",function(t,e){t.isStart!==n.props.isStart&&n._handleTimerStartPause(),t.isHandIn!==n.props.isHandIn&&n.resetTime()}),te($t(n),"resetTime",function(){n.setState({time:n.props.time})}),te($t(n),"timerFn",function(){var t=n.props,e=t.time,r=t.overAndCheckAns,o=t.timerStartPause;n.timer=setInterval(function(){n.state.time>0?n.setState({time:n.state.time-1}):(n.setState({isStart:!1,time:e}),o(),r(!0),clearInterval(n.timer)),console.log("timer on")},1e3)}),te($t(n),"_handleTimerStartPause",function(){n.props.isStart?n.timerFn():clearInterval(n.timer)}),n.state={isStart:!1,isCountDown:!1,time:3},n.timer=null,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,i.a.Component),n=e,(r=[{key:"render",value:function(){var t=this.state.time,e=this.props,n=e.isStart,r=e.timerStartPause,o=e.classes;return i.a.createElement("div",null,i.a.createElement(Gt.a,{elevation:1,className:o.paper},i.a.createElement(zt.a,{variant:"contained",color:n?"primary":"default","aria-label":"start",className:o.button,onClick:r},n?"Pause":"Start"),i.a.createElement(Ht.a,{className:o.timer,variant:"h4",component:"h3"},A(t)[0]+" : "+A(t)[1])))}}])&&Kt(n.prototype,r),o&&Kt(n,o),e}(),ne=Object(Yt.withStyles)({button:{display:"inline-block",margin:"0px 10px",verticalAlign:"top"},paper:{width:"300px",padding:"10px",margin:"auto",textAlign:"center"},timer:{display:"inline-block"}})(ee),re=[{layer:"UILayer",id:2001,objProp:"text",value:1}],oe={sSize:"12px Arial",mSize:"18px Arial"},ie={width:360,height:640},ae={width:360,height:540};var ce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,w:0,h:0};return t.x<e.x+e.w&&t.x>e.x&&t.y<e.y+e.h&&t.y>e.y},se=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0,0],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ee,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;return{id:t,cloneId:0,OBJ:new r({imgSrc:e,width:n[0],height:n[1],x:n[2],y:n[3],imgRatio:o,status:i,opacity:a})}},le=function(t){var e=t.id,n=void 0===e?"":e,r=t.spec,o=void 0===r?[0,0]:r,i=t.drawGroupClass,a=void 0===i?_e:i,c=t.groupObjs,s=void 0===c?[]:c;return{id:n,cloneId:0,OBJ:new a({x:o[0],y:o[1],groupObjs:s})}},ue=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.layerObjs;if(void 0===e|void 0===n)throw"Your object id or clone id is undefined.";return r.filter(function(t){return!(t.id===e&&t.cloneId===n)})},fe=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=t.targetTouches?t.targetTouches[0].clientX:t.clientX,s=t.targetTouches?t.targetTouches[0].clientY:t.clientY,l={x:c-e.getBoundingClientRect().left,y:s-e.getBoundingClientRect().top},u=de(n.layerObjs,r,o,a);return!!(u&&u.length>0&&-1!==u.map(function(t){return ce(l,t.OBJ)}).indexOf(!0))&&(console.log(r,o,"tap"),i)},de=function t(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"obj",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;i<e.length;i++)if(e[i].OBJ.groupObjs){var a=t(e[i].OBJ.groupObjs,n,r,o);if(a)return a}else{var c=o?e.filter(function(t){return t.id===n}):e.filter(function(t){return t.id===n&&t.cloneId===r});if(c.length>0)return c}};function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t){return(pe="function"==typeof Symbol&&"symbol"===he(Symbol.iterator)?function(t){return he(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":he(t)})(t)}function me(t){return function(t){if(Array.isArray(t))return t}(t)||xe(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ye(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function ge(t,e){return!e||"object"!==pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function be(t){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&we(t,e)}function we(t,e){return(we=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Se(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||xe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function xe(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ce(t,e,n){return e&&Ae(t.prototype,e),n&&Ae(t,n),t}var ke=function(){function t(e){var n=e.id,r=e.cloneId,o=e.x,i=e.y,a=e.w,c=e.h,s=e.fillStyle,l=void 0===s?"transparent":s,u=e.strokeStyle,f=void 0===u?"transparent":u;Oe(this,t),this.id=n,this.cloneId=r,this.x=o,this.y=i,this.w=a,this.h=c,this.fillStyle=l,this.strokeStyle=f}return Ce(t,[{key:"setAttr",value:function(t,e){this[t]=e}},{key:"draw",value:function(t){t.save(),t.fillStyle=this.fillStyle,t.fillRect(this.x,this.y,this.w,this.h),t.fill(),t.strokeStyle=this.strokeStyle,t.stroke(),t.restore()}},{key:"render",value:function(t){this.draw(t)}}]),t}(),je=function(){function t(e){var n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o,a=e.fillStyle,c=e.textConfig,s=e.text,l=void 0===s?"Hi":s,u=e.lineHeight,f=void 0===u?1.2:u,d=e.containerWidth,h=void 0===d?100:d,p=e.textAlignCenter,m=void 0===p||p,y=e.textBreak,g=void 0!==y&&y;Oe(this,t),this.textConfig=c,this.text=l,this.textBreak=g,this.breakText=null,this.fontSize=18,this.fillStyle=a,this.x=this.textAlignCenter?0:r,this.y=i,this.w=0,this.h=0,this.containerWidth=h,this.lineHeight=f,this.textAlignCenter=m}return Ce(t,[{key:"handleTextBreak",value:function(t){t.font=this.textConfig;var e=this.text.split(" "),n=e.map(function(e){return t.measureText(e).width});console.log(n),this.breakText=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=0,o=0,i=[],a=[];r<t.length;)void 0===a[o]?(a[o]=e[r],i[o]=t[r]):a[o]<n?(a[o]+=e[r],i[o]+=" "+t[r]):(a[++o]=e[r],i[o]=t[r]),r++;return i}(e,n,this.containerWidth),console.log(this.breakText)}},{key:"handleTextAlignCenter",value:function(t){this.x+=(this.containerWidth-t.measureText(this.text).width)/2,this.w=t.measureText(this.text).width,this.h=t.measureText(this.text).height}},{key:"render",value:function(t){if(t.save(),t.font=this.textConfig,t.fillStyle=this.fillStyle,this.textAlignCenter&&(this.handleTextAlignCenter(t),this.textAlignCenter=!1),this.textBreak){null===this.breakText&&this.handleTextBreak(t);for(var e=0;e<this.breakText.length;e++)t.fillText(this.breakText[e],this.x,this.y+this.fontSize*this.lineHeight*e)}else t.fillText(this.text,this.x,this.y);t.restore()}}]),t}(),Ee=function(){function t(e){var n=e.id,r=e.cloneId,o=e.imgSrc,i=e.width,a=e.height,c=e.x,s=void 0===c?0:c,l=e.y,u=void 0===l?0:l,f=e.imgRatio,d=void 0===f?1:f,h=e.status,p=void 0===h?[]:h,m=e.opacity,y=void 0===m?1:m;Oe(this,t),this.id=n,this.cloneId=r,this.imgSrc=o,this.image=new Image,this.image.src=this.imgSrc,this.imgRatio=d,this.opacity=y,this.width=i*this.imgRatio,this.height=a*this.imgRatio,this.x=s,this.y=u,this.speed=2,this.dir=!0,this.w=this.width,this.h=this.height,this.status=[{statusName:"origin",img:this.imgSrc}].concat(Se(p))}return Ce(t,[{key:"moveByUser",value:function(t){if(t.keyCode-37>=0&&t.keyCode-37<=3){var e=[-1,0,1,0][t.keyCode-37]*this.speed,n=[0,-1,0,1][t.keyCode-37]*this.speed;this.x+=e,this.y+=n}}},{key:"moveByNum",value:function(t,e){var n=function(t,e,n,r,o,i){var a=n+t,c=r+e;return(r<0||a>o||c>i||n<0)&&(r<0?"top":a>o?"right":c>i?"bottom":"left")}(this.w,this.h,this.x,this.y,ie.width,ie.height),r="right"===n||"left"===n?-t:t,o="top"===n||"bottom"===n?-e:e;this.x+=r*this.speed,this.y+=o*this.speed}},{key:"addStatus",value:function(t,e){this.status=[].concat(Se(this.status),[{statusName:t,img:e}])}},{key:"changeStatus",value:function(t){var e=this.status.filter(function(e){return e.statusName===t});e.length>0&&(this.image.src=e[0].img)}},{key:"draw",value:function(t){t.save(),t.globalAlpha=this.opacity,t.drawImage(this.image,this.x,this.y,this.width,this.height),t.restore()}},{key:"render",value:function(t){this.draw(t)}}]),t}(),Ie=function(t){function e(t){var n,r=t.frameRate,o=void 0===r?10:r,i=t.imgIndex,a=void 0===i?0:i,c=t.imgTick,s=void 0===c?0:c,l=ye(t,["frameRate","imgIndex","imgTick"]);return Oe(this,e),(n=ge(this,be(e).call(this,l))).actionsFn=[n.updateFrame],n.frameRate=o,n.w=n.width/n.frameRate,n.h=n.height,n.imgIndex=a,n.imgTick=s,n}return ve(e,Ee),Ce(e,[{key:"draw",value:function(t){t.drawImage(this.image,this.imgIndex*this.width/this.frameRate/this.imgRatio,0,this.width/this.frameRate/this.imgRatio,this.height/this.imgRatio,this.x,this.y,this.width/this.frameRate,this.height)}},{key:"updateFrame",value:function(){this.imgTick<this.frameRate-1?(this.imgTick+=.25,this.imgTick%1==0&&(this.imgIndex=this.imgTick)):this.imgTick=0}},{key:"render",value:function(t){this.updateFrame(),this.draw(t)}}]),e}(),Te=function(t){function e(t){var n;return Oe(this,e),(n=ge(this,be(e).call(this,t))).actionsFn=[].concat(Se(n.actionsFn),[n.upAction]),n.posYTick=40,n.posYIndex=0,n}return ve(e,Ie),Ce(e,[{key:"upAction",value:function(){this.posYIndex<this.posYTick&&(this.y-=1,this.posYIndex+=1)}},{key:"render",value:function(t){this.upAction(),this.updateFrame(),this.draw(t)}}]),e}(),_e=function(){function t(e){var n=e.id,r=void 0===n?"default":n,o=e.cloneId,i=void 0===o?0:o,a=e.x,c=e.y,s=e.groupObjs,l=void 0===s?[{id:0,OBJ:{}}]:s,u=e.groupRatio,f=e.clip,d=void 0===f?{isClip:!1,clipX:100,clipY:100,clipW:200,clipH:300}:f;Oe(this,t),this.id=r,this.cloneId=i,this.display=!0,this.x=a,this.y=c,this.groupRatio=u,this.clip=d,this.groupObjs=l,this.setObjInGroup(this.x,this.y,this.groupRatio)}return Ce(t,[{key:"setObjInGroup",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,r=0,o=0;o<this.groupObjs.length;o++)this.groupObjs[o].OBJ.x+=t,this.groupObjs[o].OBJ.y+=e;for(var i=0;i<this.groupObjs.length;i++)this.groupObjs[i].OBJ.w>n&&(n=this.groupObjs[i].OBJ.w),this.groupObjs[i].OBJ.h>r&&(r=this.groupObjs[i].OBJ.h);this.w=n,this.h=r}},{key:"draw",value:function(t){for(var e=0;e<this.groupObjs.length;e++)this.groupObjs[e].OBJ?this.groupObjs[e].OBJ.render(t):this.groupObjs[e].render(t)}},{key:"render",value:function(t){t.save();var e=this.clip,n=e.isClip,r=e.clipX,o=e.clipY,i=e.clipW,a=e.clipH;n&&(t.rect(r,o,i,a),t.fillStyle="transparent",t.fill()),this.display&&this.draw(t),t.restore()}}]),t}(),Ne=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oe(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.UIstate={moneyBagCount:0},this.myLayers={BackLayer:n.BackLayer,ObjLayer:n.ObjLayer,UILayer:n.UILayer},this.myLayers.UILayer,this.testNum=0,this.dir=!0,this.setIdActions=this.setIdActions.bind(this),this.frame={prev:0,now:0,fps:0}}return Ce(t,[{key:"init",value:function(){var t=this,e=JSON.parse(localStorage.getItem("gameConfig"))||[],n=JSON.parse(localStorage.getItem("gameSpawnObjConfig"))||[];0===e.length&&localStorage.setItem("gameConfig",JSON.stringify(re)),localStorage.getItem("gameSpawnObjConfig")||localStorage.setItem("gameSpawnObjConfig",JSON.stringify([]));for(var o=function(n){var r=re[n],o=r.layer,i=r.id,a=r.objProp,c=r.value,s=e.filter(function(t){return t.id===i}),l=e.length>0&&s?s[0].value:c;t.updateStateNum(o,i,a,l,!0)},i=0;i<re.length;i++)o(i);for(i=0;i<n.length;i++)this.spawnObjToLayer({layer:"ObjLayer",objFn:r[n[i].objFn],pos:{useRandom:!1,x:n[i].pos.x,y:n[i].pos.y},isInit:!0,i:i,isUI:!1});setInterval(function(){t.frame.fps=2*(t.frame.now-t.frame.prev),t.frame.prev=t.frame.now},500)}},{key:"setAttr",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=de(this.myLayers[t].layerObjs,e,n,i),c=0;c<a.length;c++)a[c].OBJ[r]=o}},{key:"updateStateNum",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=this.myLayers[t].layerObjs.filter(function(t){return t.id===e})[0].OBJ,a=o?r:1*i[n]+r;i[n]=a;var c=JSON.parse(localStorage.getItem("gameConfig")),s=y(c,e,"value",a);localStorage.setItem("gameConfig",JSON.stringify(s))}},{key:"setLayerObjs",value:function(t,e){this.myLayers[t].layerObjs=e}},{key:"spawnObjToLayer",value:function(t){var e=this,n=t.layer,r=t.objFn,o=t.pos,i=void 0===o?{useRandom:!0,x:0,y:0}:o,a=t.objFnParas,c=void 0===a?[]:a,s=t.selfDestroy,l=void 0!==s&&s,u=t.destroyTime,f=void 0===u?600:u,d=t.isInit,h=void 0!==d&&d,p=t.isUI,m=void 0===p||p,y=t.i,g=void 0===y?0:y,b=JSON.parse(localStorage.getItem("gameSpawnObjConfig")),v=this.myLayers[n],w=r.apply(void 0,[i.x,i.y].concat(Se(c))),S=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{x:0===n?~~(Math.random()*(t.width-e.OBJ.w)):n,y:0===r?~~(Math.random()*(t.width-e.OBJ.w)):r}}(ae,w,i.x,i.y),x=i.useRandom?r.apply(void 0,[S.x,S.y].concat(Se(c))):w,O=b.filter(function(t){return t.id===x.id}).length>0?b.filter(function(t){return t.id===x.id})[g].cloneId:v.layerObjs.filter(function(t){return t.id===x.id}).length+1||1,A={id:x.id,cloneId:O,pos:{x:S.x,y:S.y},objFn:r.name},C=[].concat(Se(b),[A]);v.layerObjs=[].concat(Se(v.layerObjs),[{id:x.id,cloneId:O,OBJ:x.OBJ}]),l?setTimeout(function(){e.setLayerObjs(n,ue(v,x.id,O))},f):l||h||m||localStorage.setItem("gameSpawnObjConfig",JSON.stringify(C))}},{key:"removeObjFromLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.myLayers[t];this.setLayerObjs(t,ue(r,e,n))}},{key:"setMouseCursor",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"default"!==this.canvas.style.cursor&&(this.canvas.style.cursor="default");for(var r=function(){return e.canvas.style.cursor="pointer"},o=["BackLayer","ObjLayer","UILayer"],i=this.myLayers,a=0;a<o.length;a++)for(var c=0;c<n.length;c++){var s=fe(t,this.canvas,i[o[a]],n[c],0,r,!0);!1!==s&&s()}}},{key:"setIdActions",value:function(t,e,n){var r,o=n.fn,i=me(n.parameters).slice(0);return(r=this.myLayers[t].layerObjs.filter(function(t){return t.id===e})[0].OBJ)[o].apply(r,Se(i)),this}},{key:"render",value:function(){this.frame.now+=1,this.ctx.clearRect(0,0,ie.width,ie.height);for(var t=["BackLayer","ObjLayer","UILayer"],e=0;e<t.length;e++)this.myLayers[t[e]].render(this.ctx);this.ctx.font="16px Arial",this.ctx.fillStyle="#000",this.ctx.fillText("fps:"+this.frame.fps,10,60),requestAnimationFrame(this.render.bind(this))}}]),t}();console.log("canvasSpec",ie),console.log("coinImg",$e);var Pe=function(t,e){return{id:"tabRect_"+e,cloneId:0,OBJ:new ke({x:0,y:0,w:60,h:30,fillStyle:t})}},Be=function(t){return{id:"tabText"+t,cloneId:0,OBJ:new je({x:0,y:10,textConfig:"18px Arial",text:t,fillStyle:"#fff",containerWidth:60,textAlignCenter:!0})}},Qe=function(t,e,n,r){return le({id:"UITabs_"+t,spec:[e,n],groupObjs:[Pe(r,t),Be(t)]})},De=function(t,e,n,r){return le({id:"UIDisplay_"+t,spec:[e,n],groupObjs:[Pe(r,t)]})},Le=Qe("A",30,100,"rgba(20, 200, 20, 1)"),Fe=Qe("B",120,100,"rgba(200, 20, 20, 0.5)"),Me=Qe("C",200,100,"rgba(20, 20, 200, 0.5)"),Re=De("A",30,140,"rgba(20, 200, 20, 1)");De("B",120,140,"rgba(200, 20, 20, 0.5)"),De("C",200,140,"rgba(20, 20, 200, 0.5)");function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t){return(Ge="function"==typeof Symbol&&"symbol"===Je(Symbol.iterator)?function(t){return Je(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Je(t)})(t)}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function He(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&He(t.prototype,e),n&&He(t,n),t}function ze(t,e){return!e||"object"!==Ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ye(t){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xe(t,e)}function Xe(t,e){return(Xe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ke,Ve,$e="https://cdn3.iconfinder.com/data/icons/supermario/PNG/Retro-Coin.png",Ze="images/coin-sprite-animation.png",tn=["https://static.wixstatic.com/media/7fce08_d7547c63bbb945e69d6bc5c167b39193.gif","https://www.pixelmarket.net/media/catalog/product/cache/1/image/650x650/a94eaa0e6015e0566d23f2c54dba56d0/9/a/9ab2aa59d388489c2860019b7338e4b81.PNG"],en="https://visme.co/blog/wp-content/uploads/2017/07/50-Beautiful-and-Minimalist-Presentation-Backgrounds-03.jpg",nn="https://img.freepik.com/free-vector/abstract-splashed-watercolor-textured-background_53876-8717.jpg?size=626&ext=jpg",rn="https://cdn4.iconfinder.com/data/icons/game-ui-pack-02/500/play-512.png",on="https://docs.scandit.com/flow/mobile-api/assets/ui_alert_ios.png",an="https://cdn1.iconfinder.com/data/icons/color-bold-style/21/34-512.png",cn="https://cdn0.iconfinder.com/data/icons/social-messaging-ui-color-shapes/128/close-circle-red-512.png",sn="https://www.san-x.co.jp/charapri/images/kabe/rirakkuma/119_1080_1920.png",ln="https://images-na.ssl-images-amazon.com/images/I/51Wpjypba1L._SX425_.jpg",un=["https://freeiconshop.com/wp-content/uploads/edd/bulb-curvy-flat.png","https://freeiconshop.com/wp-content/uploads/edd/html-flat.png"],fn=oe,dn=function(t){function e(t){return Ue(this,e),ze(this,Ye(e).call(this,t))}return We(e,je),qe(e,[{key:"render",value:function(t){t.font=this.textConfig,t.fillText("X "+this.text,this.x,this.y)}}]),e}(),hn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ue(this,t),this.layerObjs=e}return qe(t,[{key:"render",value:function(t){for(var e=0;e<this.layerObjs.length;e++)this.layerObjs[e].OBJ.render(t)}}]),t}(),pn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return{id:2001,OBJ:new dn({x:t,y:e,textConfig:fn.sSize,text:n})}},mn=se(-1e3,en,[ae.width,ae.height,0,0]),yn=[{id:"bulbCurvyFlat",imgSrc:un[0],x:20},{id:"htmlFlat",imgSrc:un[1],x:80},{id:"bulbCurvyFlat2",imgSrc:un[0],x:120},{id:"bulbCurvyFlat3",imgSrc:un[0],x:160}],gn=new hn([function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{id:3e3,OBJ:new je({x:t,y:e,textConfig:fn.mSize,text:"Shop ping List lab"})}}(10,220),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("testButton",rn,[30,30,t,e],Ee,1,[{statusName:"another",img:sn}])}(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("moneyBag",tn[1],[100,100,t,e],Ee,.8)}(0,220),pn(70,280),(Ke=100,Ve=100,le({id:"testGroupMap",spec:[Ke,Ve],groupObjs:yn.map(function(t){return se(t.id,t.imgSrc,[100,100,t.x,Ve],Ee,1,[],.7)})}))]),bn=new hn([function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("userCharacter",ln,[120,120,t,e],Ee,.8,[{statusName:"another",img:sn}])}(120,120)]);new hn([mn]);function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wn(t){return(wn="function"==typeof Symbol&&"symbol"===vn(Symbol.iterator)?function(t){return vn(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":vn(t)})(t)}function Sn(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function xn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function An(t,e,n){return e&&On(t.prototype,e),n&&On(t,n),t}function Cn(t,e){return!e||"object"!==wn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var In=oe,Tn=function(t){function e(t){return xn(this,e),Cn(this,kn(e).call(this,t))}return jn(e,je),An(e,[{key:"render",value:function(t){t.font=this.textConfig,t.fillText("X "+this.text,this.x,this.y)}}]),e}(),_n=function(t){function e(t){var n,r=t.upPosY,o=void 0===r?40:r,i=Sn(t,["upPosY"]);return xn(this,e),(n=Cn(this,kn(e).call(this,i))).posYTick=o,n.posYIndex=0,n}return jn(e,_e),An(e,[{key:"upAction",value:function(){this.posYIndex<this.posYTick&&(this.setObjInGroup(0,-1),this.y=this.y+-1,this.posYIndex+=1)}},{key:"render",value:function(t){this.upAction();for(var e=0;e<this.groupObjs.length;e++)this.groupObjs[e].OBJ?this.groupObjs[e].OBJ.render(t):this.groupObjs[e].render(t)}}]),e}(),Nn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];xn(this,t),this.layerObjs=e}return An(t,[{key:"render",value:function(t){for(var e=0;e<this.layerObjs.length;e++)this.layerObjs[e].OBJ.render(t)}}]),t}(),Pn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("testButton",rn,[30,30,t,e],Ee,1,[{statusName:"another",img:sn}])},Bn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("userCharacter",ln,[120,120,t,e],Ee,.8,[{statusName:"another",img:sn}])},Qn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("moneyBag",tn[1],[100,100,t,e],Ee,.8)},Dn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se(7003,tn[0],[30,30,t,e],Ee)},Ln=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return{id:2001,OBJ:new Tn({x:t,y:e,textConfig:In.sSize,text:n})}},Fn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("upCoin",Ze,[1e3,100,t,e],Te)},Mn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se(1,Ze,[1e3,100,t,e],Ie,.4)},Rn=se(-1e3,en,[ae.width,ae.height,0,0]),Jn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("alertTest",on,[200,100,t,e],Ee)},Gn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("OKIcon",an,[20,20,t,e],Ee)},Un=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return se("cancelIcon",cn,[20,20,t,e],Ee)},Hn=function(t,e){return{id:"alertBack",cloneId:0,OBJ:new ke({x:t,y:e,w:ie.width,h:ie.height,fillStyle:"rgba(0, 0, 0, 0.2)"})}},qn=function(t,e){return se("testPicBack",nn,[300,300,t,e],Ee)},zn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{id:3e3,OBJ:new je({x:t,y:e,textConfig:In.mSize,text:"Shop ping List lab"})}},Yn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{id:"alertPurchase",OBJ:new je({x:t,y:e,textConfig:In.mSize,text:"Are you sure upgrading? (cost 10000)"})}},Wn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{id:"moneyUIwithText",OBJ:new _n({upPosY:30,x:t,y:e,groupObjs:[Ln(20,60,n),Mn(0,0)]})}},Xn=function(t,e){return le({id:"alertUI",spec:[t,e],drawGroupClass:_e,groupObjs:[qn(0,0),Un(200,160),Gn(120,160),Le,Fe,Me,Re]})},Kn=[{id:"bulbCurvyFlat",imgSrc:un[0],x:20},{id:"htmlFlat",imgSrc:un[1],x:80},{id:"bulbCurvyFlat2",imgSrc:un[0],x:120},{id:"bulbCurvyFlat3",imgSrc:un[0],x:160}],Vn=function(t,e){return le({id:"testGroupMap",spec:[t,e],groupObjs:Kn.map(function(t){return se(t.id,t.imgSrc,[100,100,t.x,e],Ee,1,[],.7)})})},$n=new Nn([zn(10,220),Pn(),Qn(0,220),Ln(70,280),Vn(100,100)]),Zn=new Nn([Bn(120,120)]),tr=new Nn([Rn]),er={BackLayer:tr,ObjLayer:Zn,UILayer:$n},nr=function(t){return new Ne(t,er)};function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function or(t){return(or="function"==typeof Symbol&&"symbol"===rr(Symbol.iterator)?function(t){return rr(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":rr(t)})(t)}function ir(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ar(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){fr(t,e,n[e])})}return t}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sr(t){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ur(t,e){return(ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dr=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=sr(e).call(this,t),n=!o||"object"!==or(o)&&"function"!=typeof o?lr(r):o,fr(lr(n),"componentDidMount",function(){var t=n.state.coinGenarateSpeed;n.myGameTest=nr(n.canvas),n.myGameTest.init(),n.myGameTest.render(),n.obj;var e=localStorage.getItem("gameConfig"),r=JSON.parse(e).filter(function(t){return 2001===t.id})[0].value;n.setState({coinGenState:ar({},n.state.coinGenState,{lv20:r})}),n.addCoin(t);var o=0;setInterval(function(){++o<10?n.myGameTest.setIdActions("ObjLayer","userCharacter",{fn:"moveByNum",parameters:[1,1]}).setIdActions("ObjLayer","userCharacter",{fn:"changeStatus",parameters:["another"]}):o>=10&&o<19?n.myGameTest.setIdActions("ObjLayer","userCharacter",{fn:"changeStatus",parameters:["origin"]}):o=0},100),document.addEventListener("keydown",function(t){n.myGameTest.setIdActions("ObjLayer","userCharacter",{fn:"moveByUser",parameters:[t]}).setIdActions("ObjLayer","userCharacter",{fn:"changeStatus",parameters:["another"]})}),document.addEventListener("keyup",function(t){n.myGameTest.setIdActions("ObjLayer","userCharacter",{fn:"changeStatus",parameters:["origin"]})})}),fr(lr(n),"purchaseCoinUprade",function(t){var e=n.state.coinGenState;n.props.buy(t),n.setState({coinGenState:ar({},e,{lv20:e.lv20+1})}),n.myGameTest.spawnObjToLayer({layer:"ObjLayer",objFn:Qn,pos:{useRandom:!0,y:120},objFnParas:[20,20],selfDestroy:!1,isUI:!1}),n.myGameTest.updateStateNum("UILayer",2001,"text",1),n.myGameTest.removeObjFromLayer("UILayer","alertUI",1)}),fr(lr(n),"spawnCoins",function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,n.props.setCoin)(t),n.myGameTest.spawnObjToLayer({layer:"ObjLayer",objFn:Wn,pos:{useRandom:!0},objFnParas:[t],selfDestroy:!0})}),fr(lr(n),"addCoin",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;setInterval(function(){var t=n.state.coinGenState,e=1*t.lv1+6*t.lv20+50*t.lv100;n.spawnCoins(!0,e)},2e3/t)}),fr(lr(n),"tap",function(t,e){var r=n.myGameTest.myLayers.UILayer,o=n.myGameTest.myLayers.ObjLayer,i=[],a=function(n,r,o,a){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];i=[].concat(ir(i),[fe(t,e,n,r,o,a,c)])},c=[{layer:r,id:"OKIcon",cloneId:0,fn:function(){n.purchaseCoinUprade(1e4)}},{layer:r,id:"cancelIcon",cloneId:0,fn:function(){n.myGameTest.removeObjFromLayer("UILayer","alertUI",1)}},{layer:r,id:"alertBack",cloneId:0,fn:function(){return!1}}],s=["tabRect_A","tabRect_B","tabRect_C"],l=["rgba(20, 200, 20,0.5)","rgba(200, 20, 20,0.5)","rgba(20, 20, 200,0.5)"];[{layer:r,id:"UITabs_A",cloneId:0,fn:function(){for(var t=0;t<s.length;t++)n.myGameTest.setAttr("UILayer",s[t],0,"fillStyle",l[t]);n.myGameTest.setAttr("UILayer","tabRect_A",0,"fillStyle","rgba(20, 200, 20, 1)")}},{layer:r,id:"UITabs_B",cloneId:0,fn:function(){for(var t=0;t<s.length;t++)n.myGameTest.setAttr("UILayer",s[t],0,"fillStyle",l[t]);n.myGameTest.setAttr("UILayer","tabRect_B",0,"fillStyle","rgba(200, 20, 20, 1)")}},{layer:r,id:"UITabs_C",cloneId:0,fn:function(){for(var t=0;t<s.length;t++)n.myGameTest.setAttr("UILayer",s[t],0,"fillStyle",l[t]);n.myGameTest.setAttr("UILayer","tabRect_C",0,"fillStyle","rgba(20, 20, 200, 1)")}}].map(function(t){return a(t.layer,t.id,t.cloneId,t.fn,t.allClone)}),c.map(function(t){return a(t.layer,t.id,t.cloneId,t.fn)}),a(r,"bulbCurvyFlat",0,function(){window.alert("aa")}),a(r,"alertTest",0,function(){}),a(r,"testButton",0,function(){n.myGameTest.setIdActions("UILayer","testButton",{fn:"changeStatus",parameters:["another"]})}),a(r,"moneyBag",0,function(){n.myGameTest.spawnObjToLayer({layer:"UILayer",objFn:Xn,pos:{useRandom:!1,x:0,y:0}})}),a(o,"moneyBag",0,n.spawnCoins.bind(lr(n),!0,20),!0);for(var u=0;u<i.length;u++)if(!1!==i[u]){i[u]();break}}),fr(lr(n),"_handleChangeHat",function(t){var e=t.target.getAttribute("src");n.myGameTest.obj[0].OBJ=n.setHat(e)}),fr(lr(n),"_handleOpenGame",function(){n.setState(function(t){return{gameOpen:!t.gameOpen}})}),fr(lr(n),"setMouseCursor",function(t){}),n.state={coins:[],gameOpen:!0,coinGenarateSpeed:1,coinGenState:{lv1:1,lv20:0,lv100:0}},n.setCanvas=function(t){return n.canvas=t},n.myGameTest=null,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ur(t,e)}(e,i.a.PureComponent),n=e,(r=[{key:"render",value:function(){var t=this,e=this.state.gameOpen;return console.log("render canvas"),i.a.createElement("div",null,i.a.createElement("button",{onClick:this._handleOpenGame},"Open Game"),i.a.createElement("div",{id:"game-canvas",style:{display:e?"block":"none"}},i.a.createElement("div",{id:"coin-container"},i.a.createElement("img",{className:"coin-img",src:$e})),i.a.createElement("div",null),i.a.createElement("canvas",{ref:this.setCanvas,width:ie.width,height:ie.height,onKeyDown:this._handleMove,onMouseMove:this.setMouseCursor,onTouchStart:function(e){return t.tap(e,t.canvas)},onMouseDown:function(e){return t.tap(e,t.canvas)}})))}}])&&cr(n.prototype,r),o&&cr(n,o),e}(),hr={hello:"Hello~",superHello:"Hello, { someone } !",createQA:{bigTitle:"Create Your Own Questions And Answers"},"createQA.bigTitle":"Create Your Own Questions And Answers","createQA.databaseName":'please input your database name, or it will set to "undefined"'},pr={hello:"你好!",superHello:"你好, { someone } !","createQA.bigTitle":"創建你的題目","createQA.databaseName":'填入題庫名稱，如不填則預設為"未分類"'},mr=n(68),yr=n.n(mr),gr=n(69),br=n.n(gr);n(174);function vr(t){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t){return(wr="function"==typeof Symbol&&"symbol"===vr(Symbol.iterator)?function(t){return vr(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":vr(t)})(t)}function Sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e,n){return e&&xr(t.prototype,e),n&&xr(t,n),t}function Ar(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?kr(t):e}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ir(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Tr(t,e,n[e])})}return t}function Tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Object(xt.c)([].concat(_r(yr.a),_r(br.a))),s.b.add(u.e,u.b,u.a,u.d);var Nr="https://raw.githubusercontent.com/ms0223900/testBattle/master/QAfiles/Nihongo.json",Pr=1e3,Br=300,Qr=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=Math.random();e===t;)e=Math.random();return e},Dr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=JSON.parse(localStorage.getItem("starAndNote"))||[{}],o=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=[],o=function(o){var i=e.filter(function(e){return e[n]===t[o][n]})[0];"object"===d(i)&&(r=[].concat(p(r),[i[n]]))},i=0;i<t.length;i++)o(i);return r}(n,r||[],"id");switch(t){case"star":return g(!0,e,n,!0);case"all":return g(!1,e,n,!0);case"notSame":var i=v(n,o,"id",!0);return console.log(i),g(!1,e,i,!0);default:return g(!1,e,n,!0)}},Lr=function(t){return t.map(function(t){return Ir({},t,{checked:t.answer===t.correctAnswer})})},Fr=function(t){return fetch(t).then(function(t){return t.json()}).then(function(t){return new Promise(function(e){return e(t)},function(t){return console.log(t)})}).catch(function(t){})},Mr=function(t){var e=t.id,n=t.clickFn,r=t.stateOfMode,o=t.btnText,a=void 0===o?"":o,c=t.filterText,s=void 0===c?"":c,l=""===s?e:e.replace(s,"");return i.a.createElement("button",{id:e,style:b(r,l),onClick:n},a)},Rr=function(t){var e=t.testModeState,n=t.testModeFn,r=t.answerModeState,o=t.answerModeFn,a=t.testAmount,c=t.changeAmountFn;return i.a.createElement("div",null,i.a.createElement(Mr,{id:"all",clickFn:n,stateOfMode:e,btnText:"從全部考題隨機出題"}),i.a.createElement(Mr,{id:"notSame",clickFn:n,stateOfMode:e,btnText:"從沒出過的考題隨機出題"}),i.a.createElement(Mr,{id:"star",clickFn:n,stateOfMode:e,btnText:"從收藏出題"}),i.a.createElement("span",null,"   "),i.a.createElement("input",{type:"number",value:a,onChange:c}),i.a.createElement(Mr,{id:"answer-single",clickFn:o,stateOfMode:r,btnText:"單題模式",filterText:"answer-"}),i.a.createElement(Mr,{id:"answer-all",clickFn:o,stateOfMode:r,btnText:"試卷模式",filterText:"answer-"}))},Jr=function(t){function e(t){var n;return Sr(this,e),Tr(kr(n=Ar(this,Cr(e).call(this,t))),"componentWillMount",function(){Fr(Nr).then(function(t){var e=JSON.parse(localStorage.getItem("starAndNote")),r=t;if(e)for(var o=0;o<e.length;o++)r=y(r,e[o].id,"star",e[o].star);var i=r.map(function(t){return{id:t.id,answer:"",correctAnswer:t.correctAnswer,checked:"notYet"}});n.setState({allTestQA:r,filterAllTestQA:r,myAnswer:i,allTestFilterConditions:x(r.map(function(t){return t.databaseSort||""}))}),console.log(x(r.map(function(t){return t.databaseSort||""})))}),localStorage.getItem("noteContent")||localStorage.setItem("noteContent",""),localStorage.getItem("coin")||localStorage.setItem("coin",0);var t=1*localStorage.getItem("coin"),e=localStorage.getItem("noteContent");n.setState({noteContent:e,coin:t})}),Tr(kr(n),"setTestRecord",function(){var t=n.state,e=t.testRecord,r=t.testQA,o=t.myAnswer,i=e[e.length-1],a=Lr(o);n.setState({testRecord:[].concat(_r(e),[{testId:0===e.length?0:i.testId+1,testDataRecord:{idArr:_r(r.map(function(t){return t.id})),ansArr:_r(a)}}])})}),Tr(kr(n),"_handleSetCoin",function(t){var e=1*n.state.coin+t;localStorage.setItem("coin",e),n.setState({coin:e})}),Tr(kr(n),"_handleChangeAnswerMode",function(t,e){var r=t.target.id.replace("answer-","");n.setState({answerMode:r})}),Tr(kr(n),"_handleOpenNote",function(){n.state.isHandIn&&n.setState(function(t){return{viewMyNote:!t.viewMyNote}})}),Tr(kr(n),"_handleChangeNote",function(t){var e=t.target.value;n.setState({noteContent:e}),localStorage.setItem("noteContent",e)}),Tr(kr(n),"_handleChangeMode",function(t){var e=t.target.id;e!==n.state.testMode&&n.setState({testMode:e})}),Tr(kr(n),"_handleTestPaper",function(){var t=n.state,e=t.testMode,r=t.testAmount,o=t.filterAllTestQA,i=t.myAnswer,a=Dr(e,r,o);n.setState(function(t){return{isHandIn:!1,isStart:!0,time:Br,isCheckCorrectAns:!1,keyId:Qr(t.keyId),testQA:a,myAnswer:i.map(function(t){return Ir({},t,{answer:"",checked:"notYet"})}),singleAnswerModeState:{index:0,idArr:a.map(function(t){return t.id})}}})}),Tr(kr(n),"_handleCheckAnswer",function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=n.state,o=r.isHandIn,i=(r.testQA,r.myAnswer),a=r.answerMode,c=r.singleAnswerModeState,s=r.testRecord,l=(r.isStart,c.idArr[c.index]);console.log(s.length),o||("all"===a?(t=Lr(i),n.setState({isHandIn:!0,isStart:!1,myAnswer:t}),n.setTestRecord()):"single"===a&&c.index<c.idArr.length&&(t=e?Lr(i):[].concat(_r(i.filter(function(t){return t.id!==l})),[Lr(i.filter(function(t){return t.id===l}))[0]]),n._handleToNextQuestion(e),n.setState({myAnswer:t,isHandIn:e?!o:o})))}),Tr(kr(n),"_handleChangeAnswer",function(t){var e=n.state,r=e.myAnswer,o=e.isHandIn,i=t.target,a=i.name,c=i.value;console.log(t.target.getAttribute("answer"));var s=y(r,a,"answer",c);console.log(s),o||n.setState({myAnswer:s})}),Tr(kr(n),"_handleChangeAmout",function(t){n.setState({testAmount:t.target.value})}),Tr(kr(n),"_handleCheckCorrectAnswer",function(){n.setState(function(t){return{isCheckCorrectAns:!t.isCheckCorrectAns}})}),Tr(kr(n),"_handleToNextQuestion",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=n.state.singleAnswerModeState;setTimeout(function(){var r=t?e.idArr.length:e.index+1;r>e.idArr.length-1?(n.setState({isHandIn:!0,isStart:!1}),n.setTestRecord()):n.setState({singleAnswerModeState:Ir({},e,{index:r})})},Pr),console.log(n.state.singleAnswerModeState.index)}),Tr(kr(n),"_handleChangeSelectDatabase",function(t){var e=n.state,r=e.nowFIlterCondition,o=e.allTestQA,i=e.filterAllTestQA,a=t.target.value,c=[].concat(_r(r),[a]),s=o.filter(function(t){return t.databaseSort===a}),l=0===r.length?s:[].concat(_r(i),_r(s));-1===r.indexOf(a)&&n.setState(function(t){return{nowFIlterCondition:c,filterAllTestQA:l}})}),Tr(kr(n),"_handleDeleteSelectDatabase",function(t){var e=n.state,r=e.allTestQA,o=e.nowFIlterCondition,i=e.filterAllTestQA,a=t.target.getAttribute("name"),c=o.filter(function(t){return t!==a}),s=i.filter(function(t){return t.databaseSort!==a}),l=0===s.length?r:s;n.setState({nowFIlterCondition:c,filterAllTestQA:l})}),Tr(kr(n),"_handleViewTestRecord",function(t){var e=n.state,r=e.allTestQA,o=e.testRecord,i=1*t.target.getAttribute("name"),a=o.filter(function(t){return t.testId===i})[0];console.log(a),n.setState({answerMode:"all",testQA:v(r,a.testDataRecord.idArr,"id"),myAnswer:a.testDataRecord.ansArr,isHandIn:!0})}),Tr(kr(n),"_handleTimerStart",function(){var t=n.state,e=t.isStart,r=t.isHandIn;t.testQA.length>0&&!r&&n.setState({isStart:!e})}),Tr(kr(n),"_handleBuying",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=n.state.coin-t;return e>0?(n.setState({coin:e}),!0):(window.alert("money is not enough~"),!1)}),n.state={myAnswer:[{}],isHandIn:!1,isCheckCorrectAns:!1,isStart:!1,time:300,coin:0,allTestQA:[],filterAllTestQA:[],testRecord:[],allTestFilterConditions:[],nowFIlterCondition:[],testQA:[],testAmount:10,testMode:"all",answerMode:"single",singleAnswerModeState:{index:0,idArr:[]},keyId:0,viewMyNote:!1,noteContent:""},n.testRecordTemp=[{testId:0,testDataRecord:{idArr:[0],ansArr:[{answer:"A",correctAnswer:""}]}}],n.noteArea=null,n}return jr(e,i.a.PureComponent),Or(e,[{key:"render",value:function(){var t=this,e=this.state,n=e.myAnswer,r=e.isHandIn,o=e.testAmount,a=e.keyId,c=e.testQA,s=void 0===c?[]:c,u=e.viewMyNote,f=e.noteContent,d=e.isCheckCorrectAns,h=e.answerMode,p=e.singleAnswerModeState,m=e.testMode,y=e.allTestFilterConditions,g=e.nowFIlterCondition,b=e.testRecord,v=e.isStart,w=e.time,S=e.coin;return i.a.createElement("div",null,i.a.createElement("div",{className:"tab-menu"},i.a.createElement("div",null,i.a.createElement("h3",null,"選擇題庫"),i.a.createElement(St,{allTestFilterConditions:y,nowFIlterCondition:g,changeSelectDatabase:this._handleChangeSelectDatabase,deleteSelectDatabase:this._handleDeleteSelectDatabase}),i.a.createElement(Rr,{testModeState:m,testModeFn:this._handleChangeMode,answerModeState:h,answerModeFn:this._handleChangeAnswerMode,testAmount:o,changeAmountFn:this._handleChangeAmout}),i.a.createElement("button",{onClick:this._handleTestPaper},"出題！！")),i.a.createElement("div",null,i.a.createElement("button",{onClick:this._handleOpenNote},"查看我的筆記")),i.a.createElement("div",null,i.a.createElement("img",{className:"coin-img",src:"https://cdn3.iconfinder.com/data/icons/supermario/PNG/Retro-Coin.png"}),i.a.createElement("span",null," "," X "+S," "))),i.a.createElement("hr",null),i.a.createElement(ne,{time:w,isStart:v,isHandIn:r,timerStartPause:this._handleTimerStart,overAndCheckAns:this._handleCheckAnswer}),i.a.createElement("div",{className:"test-paper-container"},v||r?"single"===h?i.a.createElement(ct,{key:a,testQA:s,myAnswer:n,isHandIn:r,isCheckCorrectAns:d,changeAnswer:this._handleChangeAnswer,checkAnswer:this._handleCheckAnswer.bind(this,!1),checkCorrectAnswer:this._handleCheckCorrectAnswer,singleAnswerModeState:p}):i.a.createElement(at,{key:a,testQA:s,myAnswer:n,isHandIn:r,isCheckCorrectAns:d,changeAnswer:this._handleChangeAnswer,checkAnswer:this._handleCheckAnswer,checkCorrectAnswer:this._handleCheckCorrectAnswer}):"不給你看"),i.a.createElement("div",{className:"test-record-container"},b.map(function(e){return i.a.createElement("div",{onClick:t._handleViewTestRecord,name:e.testId,key:e.testId},"test record "+e.testId)})),i.a.createElement(Rt,{setCoin:this._handleSetCoin,oldData:this.state.allTestQA}),i.a.createElement("div",{id:"myNote",style:{display:u?"block":"none"}},i.a.createElement("h2",null,"My Note",i.a.createElement("span",{className:"back-icon",onClick:this._handleOpenNote},i.a.createElement(l.a,{icon:"arrow-right"}))),i.a.createElement("textarea",{onChange:this._handleChangeNote,placeholder:"write your note here~",value:f,ref:function(e){return t.noteArea=e}})),i.a.createElement(xt.a,{id:"hello"}),i.a.createElement(dr,{buy:this._handleBuying,setCoin:this._handleSetCoin}),i.a.createElement("button",{onClick:this.props.changeLang},"Change Lang"))}}]),e}(),Gr=function(t){function e(t){var n;return Sr(this,e),Tr(kr(n=Ar(this,Cr(e).call(this,t))),"chooseLang",function(t){switch(t){case"en":return hr;case"zh":return pr;default:return hr}}),Tr(kr(n),"_handleChangeLang",function(){n.setState({lang:"en"===n.state.lang?"zh":"en"})}),n.state={lang:"zh"},n}return jr(e,i.a.Component),Or(e,[{key:"render",value:function(){var t=this.state.lang;return i.a.createElement(xt.b,{locale:t,key:t,messages:this.chooseLang(t)},i.a.createElement(Jr,{changeLang:this._handleChangeLang}))}}]),e}();c.a.render(i.a.createElement(Gr,null),document.getElementById("root"))},62:function(t,e){},70:function(t,e,n){t.exports=n(179)},87:function(t,e){},93:function(t,e){}});